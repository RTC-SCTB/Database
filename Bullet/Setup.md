# Настройка Bullet

Вся настройка производится через веб-интерфейс (т.е. через браузер). Есть возможность подключаться к Bullet'ам через ssh
и проводить настройку таким образом через командную строку, для этого вводится команда:`ssh ubnt@ip.address`, где 
ip.address - текущий адрес точки доступа (т.е. по умолчанию будет `ssh ubnt@192.168.1.20`). Но этого никогда не делали, 
потому что не было такой необходимости. 

По умолчанию IP адрес для Bullet: `192.168.1.20`.  
В адресную строку браузера вводится IP-адрес Bullet'а, после этого обычно возникает предупреждение о безопасности,
добавляем исключение, тогда появляется форма для входа.  
По умолчанию:  
Логин: `ubnt`  
Пароль: `ubnt`  

Если по какой-то причине вы забыли какой адрес зафиксирован за Bullet'ом доступа, найти ее с помощью сканера сети не 
выходит, и вообще много что пошло не так, можно сбросить точку доступа до заводских настроек. Для этого на Bullet 
подается питание, после этого на несколько секунд (10-15) зажимается кнопка `Reset` (она рядом с ethernet разъемом). 
Как только Bullet перестал моргать своими светодиодами - к нему можно снова пытаться подключиться по стандартному 
IP-адресу, со стандартным логином и паролем.

Если все прошло хорошо, должна появиться вот такая картина (для Bullet'а настроенного как точка доступа) - **вкладка 
Main**  
![Main page](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/main.jpg)  

Здесь отражены все основные сведения о текущем состоянии Bullet'a, названия в большинстве своем говорят за себя.
Основные, которые будут вас волновать скорее всего чаще всего:
- `Wireless Mode` - в каком режиме работает Bullet, станция или точка доступа.

- `SSID` - имя сети, которую данная точка доступа раздает

- `Channel/Frequency` - номер канала, на котором работает Bullet, должен быть настроен одинаково для всех Bullet'ов в 
сети.

- `Channel width` - должен быть настроен одинаково для всех Bullet'ов в сети.

- `airMAX` - включена ли надстройка airMAX, опять же, должно быть одинаково настроено для всех Bullet'ов в сети (либо у 
всех выключено)


## Вкладка airMAX  
![airMAX](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/airMAX.jpg)  

Здесь происходит настройка всех параметров airMAX для Bullet'ов.
Если Bullet настроен как точка доступа (на картинке), здесь можно включить или выключить эту надстройку.  
Если Bullet настроен как станция, здесь можно выставить приоритет airMAX.  
Пока никто не экспериментировал с этими настройками в полной мере.  

## Вкладка Wireless для Bullet настроенного как Access Point  
![Access Point](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/wireless_access_point.jpg)    
Основные настройки:
- `Wireless Mode` - Режим работы Bullet - станция, точка доступа, повторитель (не использовалось нами).

- `WDS` - если я правильно понимаю, это позволяет использовать точки доступа как "прозрачные мосты" в сети, т.е. пакеты
просто напрямую пробрасываются от Ethernet до Wi-Fi. Таким образом можно настроить Bullet'ы так, что у них будут 
IP-адреса настроены под другую подсеть, Raspberry Pi и пульт их видеть не будут, но сеть будет работать.

- `SSID` - имя Wi-Fi сети, которую раздает точка доступа

- `Channel width` - ширина каждого канала. Из справки самого Bullet: чем шире канал, тем выше пропускная способность, но
ниже стабильность на больших дистанциях. Не уверен какая настройка будет оптимальной для нас, **нужны эксперименты**.

- `Frequency` - частота, на которой работает Bullet, фактически номер канала на котором он сейчас работает. По хорошему
надо использовать сканер частот, определять какой канал более свободен прямо сейчас, и занимать его. Можно выставить в 
режим `auto` тогда Bullet будет сам пытаться занять более свободный, но работает это не очень хорошо.

- `Antenna Gain`, `Cable loss`, `Output power` - полагаю, эти три настройки позволят оптимально настроить выходную 
мощность Bullet, но этим никто особо не занимался, **нужны эксперименты**.

- `Wireless security` - здесь настраивается пароль, по которому можно будет подключиться к точке доступа. Можно
настроить вплоть до разрешения только конкретным устройствам с конкретным MAC-адресом, но обычно использовали только
пароль.


## Вкладка Wireless для Bullet настроенного как Station  
![Station](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/wireless_station.jpg)  
Настроек здесь гораздо меньше, к тому же большая часть совпадает с настройками точки доступа.
Основные настройки:  
- `SSID` - имя сети, к которой будет подключаться станция. Можно нажать кнопку `Select` и выбрать точку доступа из тех, 
которые видны этой станции (очевидно, для этого нужная точка доступа должна быть включена).

- `Wireless Security` - здесь вводится пароль от  сети, к которой вы пытаетесь подключиться.  
Остальные настройки совпадают с настройками точки доступа.

## Вкладка Network  
![Network](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/network.jpg)  
Здесь настраивается все, что касается проводного соединения с Bullet.  
Основные настройки:
- `Management IP Address` - фиксированный (Static) или динамический (DHCP) ip-адрес установлен у Bullet'a. Динамический
IP должен кто-то выдавать, поэтому DHCP указывается только у Bullet'a подключенного к роутеру, который раздает интернет
(например, так настроен Bullet который раздает Wi-Fi в лаборатории). Во всех остальных случаях стоит прописать 
статический IP и отметить его где-нибудь (например написать прямо на корпусе Bullet'a)  

- `DHCP Fallback IP` - для настройки DHCP. Полагаю это тот IP адрес, который будет задан Bullet'у, если по какой-то 
причине извне никто не задаст ему адреса.

- `IP Address` - для настройки Static именно этот IP адрес будет в любом случае присвоен Bullet'у, по этому адресу можно
 будет к нему подключиться

## Вкладка Advanced  
![Advanced](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/advanced.jpg)  
Откровенно говоря тут никто никогда и ничего не настраивал, так что оставим этот раздел на будущее. Из того, что может
быть интересным - настройка `Signal LED hresholds` - указать какой светодиод должен загораться при каком уровне сигнала.

## Вкладка Services  
![Services](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/services.jpg)  
Тут тоже никто ничего и никогда не настраивал. Из того что кажется интересным на первый взгляд:
- `Ping watchdog` - Bullet будет периодически пинговать указанный IP адрес. В случае если этот адрес окажется 
недостижим, Bullet перезагружается.

- `SSH server` - настройки подключения к Bullet по ssh. Не знаю зачем может понадобиться изменять настройки по умолчанию.

## Вкладка System  
![System](https://github.com/RTC-SCTB/Database/blob/master/Bullet/Images/system.jpg)  
Общие настройки конкретно для этого Bullet'a: 
- Текущая версия прошивки, которую следует периодически обновлять. Для этого c 
[официального сайта](https://www.ubnt.com/download/airmax-m/bulletm) скачивается последняя версия прошивки, после чего
файл заливается на Bullet кнопка рядом с надписью `Upload Firmware`.

- Здесь же можно настроить имя устройства, имя пользователя по которому происходит подключение к Bullet, часовой пояс 
(нужно только для логов, как я понял), выключить кнопку `reset` (никогда так не делайте), и т.д.

- Из самого полезного - здесь есть кнопка `Reboot`, чтобы программно перезагрузить Bullet без нажатия на кнопку.